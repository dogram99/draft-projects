import React, {memo} from 'react';
import {useDispatch, useSelector} from "react-redux";
import {NavLink} from "react-router-dom";
import PropTypes from 'prop-types';
import './Header.scss';
import {logOut} from "../../store/actions/authActions";
import {getIsAuthStatus, getOwnerName} from "../../store/selectors/auth-selectors";

const Header = props => {
    // Other Hooks
    const dispatch = useDispatch();

    // Selectors
    const isAuth = useSelector(getIsAuthStatus);
    const name = useSelector(getOwnerName);

    return (
        <header className="app-header">
            <div className="container-fluid">
                <div className="row">
                    <div className="col-6">
                        <div className="app-logo-link">
                            <NavLink to="/">
                                    <span className="app-logo">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="108" height="24" fill="#22c55e">
                                            <path
                                                d="M12.501 13.11v3.147c0 4.445 3.342 7.334 7.75 7.334h2.808c4.408 0 7.587-2.889 7.587-7.334V13.11c0-4.445-3.26-7.417-7.668-7.417H20.17c-4.408 0-7.668 2.972-7.668 7.417zm7.137-3.801l2.62-.001c1.215.128 1.889.479 2.376.831.322.23 1.574 1.042 1.595 3.38l.005 4.309c0 1.144-1.2 1.972-2.725 1.972l-2.621.001c-1.214-.128-1.888-.479-2.375-.831-.322-.231-1.574-1.043-1.595-3.381l-.005-4.309c0-1.143 1.2-1.971 2.725-1.971zM53.436.595h3.861c.474 0 .899.395.899.888l.002 22.111-2.749.001c-1.114 0-2.013-.926-2.013-2.08V.595zm36.259 0h3.49c.469 0 .89.409.89.888v22.051l-4.428.039.047-22.977zM9.402.587c.494 0 .897.412.897.896v15.586c0 3.47-2.921 6.526-6.753 6.526-.643 0-3.546-.001-3.546-.001v-3.292c0-.631.349-1.124.915-1.124h3.617c.607 0 1.154-.414 1.154-1.282L5.682.595l3.72-.008zm91.745 5.106h5.833l-7.741 8.673 8.291 9.229s-3.27-.016-3.835.001c-1.799 0-3.119-1.439-3.734-2.08l-4.252-5.299s-1.048-1.105-1.048-1.849c0-.922 1.012-2.077 1.012-2.077l5.475-6.597zm-39.491 0l3.681-.005c.46 0 .894.384.894.892v17.015l-2.532-.005c-1.153 0-2.032-.94-2.032-2.074l-.011-15.823zm-.941-2.972c0-1.26 1.357-2.281 3.032-2.281s3.032 1.021 3.032 2.281-1.357 2.281-3.032 2.281-3.032-1.021-3.032-2.281zm9.183 2.977h3.383c.483 0 .889.389.889.881l.001 2.248 1.199-2.358c.525-.501 1.322-.776 2.889-.776l3.536-.002c3.52 0 5.534 2.781 5.568 6.372l-.034 11.532h-2.552c-1.241 0-2.043-.985-2.043-2.08l.007-9.652c0-1.491-.91-2.563-2.275-2.563h-4.458c-.761 0-1.231.436-1.231 1.183l-.001 13.111h-2.825c-1.183.001-2.044-1.014-2.053-2.079V5.698zM37.675 8.866l-.001-7.384c0-.493-.425-.888-.9-.888h-3.86v15.665c0 4.444 3.343 7.334 7.75 7.334h2.809c4.407 0 7.586-2.89 7.586-7.334v-3.148c0-4.444-3.26-7.416-7.668-7.416h-2.808c-.489 0-1.216.212-1.607.607-.391.473-.9 1.696-1.301 2.563zm2.774.245l2.319-.001c1.215.128 1.889.479 2.377.831.321.231 1.573 1.043 1.595 3.381l.005 4.485c0 1.144-1.2 1.972-2.726 1.972l-2.319.001c-1.215-.128-1.889-.479-2.377-.831-.321-.231-1.573-1.043-1.595-3.38l-.005-4.485c0-1.144 1.2-1.972 2.725-1.972z"/></svg>
                                    </span>
                            </NavLink>
                        </div>
                    </div>
                    <div className="col-6">
                        <div className="d-flex justify-content-end align-items-center">
                            {isAuth && (
                                <div className="account">
                                    <span className="account__name">{name}</span>
                                    <div className="account__button relative" onClick={logOut}>
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                             xmlns="http://www.w3.org/2000/svg">
                                            <path
                                                d="M2.97461 5.97491C2.97461 5.42263 3.42232 4.97491 3.97461 4.97491H19.9746C20.5269 4.97491 20.9746 5.42263 20.9746 5.97491C20.9746 6.5272 20.5269 6.97491 19.9746 6.97491H3.97461C3.42232 6.97491 2.97461 6.5272 2.97461 5.97491ZM2.97461 11.9749C2.97461 11.4226 3.42232 10.9749 3.97461 10.9749H19.9746C20.5269 10.9749 20.9746 11.4226 20.9746 11.9749C20.9746 12.5272 20.5269 12.9749 19.9746 12.9749H3.97461C3.42232 12.9749 2.97461 12.5272 2.97461 11.9749ZM2.97461 17.9749C2.97461 17.4226 3.42232 16.9749 3.97461 16.9749H19.9746C20.5269 16.9749 20.9746 17.4226 20.9746 17.9749C20.9746 18.5272 20.5269 18.9749 19.9746 18.9749H3.97461C3.42232 18.9749 2.97461 18.5272 2.97461 17.9749Z"
                                                fill="#22C55E"/>
                                        </svg>
                                        <ul className="drop-down">
                                            <li onClick={() => dispatch(logOut())}>Log Out</li>
                                        </ul>
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            </div>
        </header>
    );
}

Header.propTypes = {
    name: PropTypes.string,
    isAuth: PropTypes.bool,
    logOut: PropTypes.func
}

export default memo(Header);
